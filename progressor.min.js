var progressor={};progressor.mouseEventRefresh="",progressor.mouseDown=!1,progressor.init=function(a){this._media=a.media,this._bar=a.bar,this._text=a.text,this._time=a.time,progressor.initMedia(),progressor.initProgressBar()},progressor.initMedia=function(){this._media.addEventListener("timeupdate",progressor.updateProgress,!1),this._media.addEventListener("timeupdate",progressor.updateTimeCount,!1),this._media.addEventListener("loadedmetadata",function(){progressor.updateTimeCount(),progressor.addClickEvents()},!1),this.updateTimeCount(this._media)},progressor.initProgressBar=function(){var a=document.createElement("span");a.textContent=this._text||"",this._bar.style.position="relative",this._bar.style.zIndex=1;var b=document.createElement("div");b.id="progressor-progress",b.style.width="0%",b.style.height="100%",b.style.position="absolute",b.style.top=0,b.style.zIndex=-1,this._bar.style.webkitUserSelect="none",this._bar.style.userSelect="none",this._bar.appendChild(a),this._bar.appendChild(b)},progressor.updateProgress=function(){progressor.updateTimeCount();var a=0;progressor._media.currentTime>0&&(a=Math.floor(100/progressor._media.duration*progressor._media.currentTime)),document.getElementById("progressor-progress").style.width=a+"%"},progressor.formatTime=function(a){var b=Math.floor(a/60),c=("0"+Math.round(a-60*b)).slice(-2);return b+":"+c},progressor.updateTimeCount=function(){if(this._time){var a=this.formatTime(progressor._media.currentTime),b=this.formatTime(progressor._media.duration);this._time.innerHTML=a+"/"+b}},progressor.timeFromCursorPosition=function(a,b,c){var d=a.getBoundingClientRect(),e=b.clientX-d.left,f=e/d.width;return f*c},progressor.setMediaProgress=function(a){progressor._media.currentTime=progressor.timeFromCursorPosition(progressor._bar,a,progressor._media.duration),progressor.updateProgress()},progressor.addClickEvents=function(){this._bar.addEventListener("mousedown",function(a){progressor.mouseDown=!0,progressor.setMediaProgress(a)}),document.addEventListener("mouseup",function(){clearInterval(progressor.mouseEventRefresh),progressor.mouseDown=!1}),document.addEventListener("mousemove",function(a){progressor.mouseDown===!0&&(progressor.mouseEventRefresh=setInterval(progressor.setMediaProgress(a),1e3))})};
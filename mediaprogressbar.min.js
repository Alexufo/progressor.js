var mpb={};mpb.mouseEventRefresh="",mpb.mouseDown=!1,mpb.init=function(a){this._media=a.media,this._bar=a.bar,this._text=a.text,this._time=a.time,mpb.initMedia(),mpb.initProgressBar()},mpb.initMedia=function(){this._media.addEventListener("timeupdate",mpb.updateProgress,!1),this._media.addEventListener("timeupdate",mpb.updateTimeCount,!1),this._media.addEventListener("loadedmetadata",function(){mpb.updateTimeCount(),mpb.addClickEvents()},!1),this.updateTimeCount(this._media)},mpb.initProgressBar=function(){var a=document.createElement("span");a.textContent=this._text||"",this._bar.style.position="relative",this._bar.style.zIndex=1;var b=document.createElement("div");b.id="progress",b.style.width="0%",b.style.position="absolute",b.style.top=0,b.style.zIndex=-1,this._bar.style.webkitUserSelect="none",this._bar.style.userSelect="none",this._bar.appendChild(a),this._bar.appendChild(b)},mpb.updateProgress=function(){mpb.updateTimeCount();var a=0;mpb._media.currentTime>0&&(a=Math.floor(100/mpb._media.duration*mpb._media.currentTime)),mpb._bar.childNodes[2].style.width=a+"%"},mpb.formatTime=function(a){var b=Math.floor(a/60),c=("0"+Math.round(a-60*b)).slice(-2);return b+":"+c},mpb.updateTimeCount=function(){if(this._time){var a=this.formatTime(mpb._media.currentTime),b=this.formatTime(mpb._media.duration);this._time.innerHTML=a+"/"+b}},mpb.timeFromCursorPosition=function(a,b,c){var d=a.getBoundingClientRect(),e=b.clientX-d.left,f=e/d.width;return f*c},mpb.setMediaProgress=function(a){mpb._media.currentTime=mpb.timeFromCursorPosition(mpb._bar,a,mpb._media.duration),mpb.updateProgress()},mpb.addClickEvents=function(){this._bar.addEventListener("mousedown",function(a){mpb.mouseDown=!0,mpb.setMediaProgress(a)}),document.addEventListener("mouseup",function(){clearInterval(mpb.mouseEventRefresh),mpb.mouseDown=!1}),document.addEventListener("mousemove",function(a){mpb.mouseDown===!0&&(mpb.mouseEventRefresh=setInterval(mpb.setMediaProgress(a),1e3))})};